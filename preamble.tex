% use packages
\usepackage{amssymb,amsmath,amsthm}
\usepackage{thm-restate}
% from thm-restate import restatable
\usepackage{longtable}
\usepackage{array}
\usepackage{booktabs}
% from booktabs import \toprule, \midrule, \bottomrule, \abovetopsep, \defaultaddspace
\usepackage[capitalize,sort]{cleveref}
% from cleverref import \cref, \crefname
\usepackage{algorithm,algpseudocode}
\usepackage{xcolor}
\usepackage{datetime}
\usepackage{comment}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{pifont}
\usepackage{anyfontsize}
\usepackage{xfrac}
% from xfrac import sfrac
\usepackage[shortlabels]{enumitem}
\usepackage{mathrsfs}
\usepackage{tikz}
\usetikzlibrary{decorations.pathreplacing,arrows.meta,calc,3d,perspective}

% use default font for \mathcal
\DeclareMathAlphabet{\mathcal}{OMS}{cmsy}{m}{n}

% Numbered environments
\newtheorem{remarks}{Remarks}[chapter] %\label{rmk:}
\newtheorem{example}{Example}[chapter] %\label{exp:}
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{lemma}{Lemma}[chapter]
\newtheorem{corollary}{Corollary}[chapter]
\newtheorem{discussion}{Discussion}[chapter] %\label{dis:}
\newtheorem{definition}{Definition}[chapter]
\newtheorem{property}{Property}[chapter]
\newtheorem{transformation}{Transformation}[chapter]
\newtheorem{proposition}{Proposition}[chapter]
\newtheorem{claim}{Claim}[chapter]
\newtheorem{mechanism}{Mechanism}[chapter]
\newtheorem{question}{Question}[chapter]
\newtheorem{observation}{Observation}[chapter]
\newtheorem{fact}{Fact}[chapter]

\crefname{observation}{Observation}{Observations}
\crefname{claim}{Claim}{Claims}
\crefname{property}{Property}{Properties}
\crefname{transformation}{Transformation}{Transformations}
\crefname{algorithm}{Algorithm}{Algorithms}

% wrap URLs
\Urlmuskip=0mu plus 0.1mu
\makeatletter
\g@addto@macro{\UrlBreaks}{%
\do\/%
\do\a\do\b\do\c\do\d\do\e\do\f\do\g\do\h\do\i\do\j\do\k\do\l\do\m%
\do\n\do\o\do\p\do\q\do\r\do\s\do\t\do\u\do\v\do\w\do\x\do\y\do\z%
\do\A\do\B\do\C\do\D\do\E\do\F\do\G\do\H\do\I\do\J\do\K\do\L\do\M%
\do\N\do\O\do\P\do\Q\do\R\do\S\do\T\do\U\do\V\do\W\do\X\do\Y\do\Z%
\do\0\do\1\do\2\do\3\do\4\do\5\do\6\do\7\do\8\do\9%
}
\makeatother

% shorthands
\newcommand*{\wLoG}{without loss of generality}
\newcommand*{\WLoG}{Without loss of generality}
\newcommand*{\Th}{^{\textrm{th}}}
\let\eps\varepsilon
\newcommand*{\defeq}{:=}

% math
\newcommand*{\floor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand*{\ceil}[1]{\left\lceil #1 \right\rceil}
\newcommand*{\abs}[1]{\left\lvert #1 \right\rvert}
\newcommand*{\norm}[1]{\left\lVert #1 \right\rVert}
\newcommand*{\smallfloor}[1]{\lfloor #1 \rfloor}
\newcommand*{\smallceil}[1]{\lceil #1 \rceil}
\newcommand*{\smallabs}[1]{\lvert #1 \rvert}
\newcommand*{\smallnorm}[1]{\lVert #1 \rVert}
\DeclareMathOperator*{\E}{E}
\DeclareMathOperator*{\Var}{Var}
\DeclareMathOperator*{\argmin}{argmin}
\DeclareMathOperator*{\argmax}{argmax}
\DeclareMathOperator{\opt}{opt}
\newcommand*{\optprog}[3]{
\begin{array}{*3{>{\displaystyle}l}}
#1 & \multicolumn{2}{>{\displaystyle}l}{#2}
#3 \end{array}}

% algorithmicx
\algnewcommand{\LineComment}[1]{\State \textcolor{gray}{\texttt{//} \textit{#1}}}
\renewcommand{\algorithmiccomment}[1]{\hfill\textcolor{gray}{\texttt{//} \textit{#1}}}
\algblockdefx{RepeatN}{EndRepeatN}[1]{\textbf{repeat} #1 \textbf{times}}{\textbf{end repeat}}
% \parState: derived from https://tex.stackexchange.com/a/200198
\makeatletter
\newcommand{\algmargin}{\the\ALG@thistlm}
\makeatother
\algnewcommand{\parState}[1]{\State\mbox{\hspace*{2em}%
\parbox[t]{\dimexpr\linewidth-\algmargin-2em}{\hspace*{-2em}\strut #1\strut}}}

% arrays and tables
\abovetopsep=4pt
\defaultaddspace=0.4em
\newcolumntype{L}{>{$\displaystyle}l<{$}}

% Miscellaneous
\allowdisplaybreaks[1]
\newdateformat{monthyeardate}{\monthname[\THEMONTH], \THEYEAR}
\newcommand{\blankpage}{\newpage\thispagestyle{empty}\mbox{}\newpage}
\hfuzz=2pt
\newcommand*{\thmdep}[2]{}
\newcommand*{\thmdepcref}[2]{\cref{#1}}
\newenvironment*{tightemize}{\begin{itemize}[noitemsep]}{\end{itemize}}
